<script>
    async function fetchBlueskyPosts() {
        try {
            const response = await fetch("https://bluesky-auth-worker.chamcgill.workers.dev/");
            const data = await response.json();

            const postsContainer = document.getElementById('posts');
            postsContainer.innerHTML = ''; // Clear loading text

            data.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post';
                postElement.innerHTML = `
                    <p>${post.text}</p>
                    <a href="${post.url}" target="_blank">View Post</a>
                    <hr>
                `;
                postsContainer.appendChild(postElement);
            });

        } catch (error) {
            console.error("Error fetching Bluesky posts:", error);
            document.getElementById('posts').innerHTML = `<p class='error'>Failed to load posts.</p>`;
        }
    }

    fetchBlueskyPosts();
</script>
